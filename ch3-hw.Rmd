---
title: "第三章-作业"
author: "朱子灏2019193014"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 练习题

1. 矩阵$A=\left[ \begin{matrix} 3&2&3\\4&2&6\\7&8&1\\  \end{matrix} \right]$，
矩阵$B=\left[\begin{matrix}1&1&1\\2&2&2\\3&3&3\\  \end{matrix}\right]$,求$A\times B$，以及A与B对应元素之间的乘积。
```{r}
A=matrix(c(3,4,7,2,2,8,3,6,1),nrow=3,ncol=3)
B=matrix(c(1,2,3,1,2,3,1,2,3),nrow=3,ncol=3)
A%*%B
A*B
```

2. 矩阵A和B都由1,2,...,16构成，且都为方阵，其中矩阵A按列输入，矩阵B按行输入。计算$C=A+B$，$D=A-B$。
```{r}
A=matrix(c(1:16),nrow=4,ncol=4,byrow=T)
B=matrix(c(1:16),nrow=4,ncol=4,byrow=F)
C=A+B
D=A-B
C
D
```

3. 矩阵A由1,2,...,20构成，维度为$4\times 5$。
```{r}
A = matrix(c(1:20),nrow=4,ncol=5)
A
```

- 提取A矩阵的第2,3列，记为A1。
```{r}
A1=A[,c(2,3)]
A1
```

- 提取A矩阵的第2,3行，记为A2。
```{r}
A2 =A[c(2,3),]
A2
```

- 提取A矩阵的第2,3行，第2,3列，记为A3。
```{r}
A3 =A[c(2,3),c(2,3)]
A3
```

- 把A矩阵的第2到5列的元素值全部改为100，记为A4。
```{r}
A =matrix(c(1:20),nrow = 4,ncol=5)
A[,2:5]=matrix(c(100))
A4=A
A4
```

- 删除A矩阵的第1列和第5列，记为A5。
```{r}
A5<-A[,c(2:4)]
A5
```

- 提取A矩阵的第一列，记为A6(A6为一个向量)。
```{r}
A6=A[,c(-2:-5)]
A6
class(A6)
```

- 提取A矩阵的第一行，记为A7(A7为一个维度为$1\times 5$)的矩阵。
```{r}
A7 = A[c(-2:-4),,drop=FALSE]
A7
class(A7)
```

4. 矩阵A和B都由1,2,...,20构成，且维度都为$4\times 5$，其中矩阵A按列输入，矩阵B按行输入。
- 按行合并矩阵A，B，要求B在A的下面。
```{r}
A=matrix(c(1:20),nrow=4,ncol=5,byrow=T)
B=matrix(c(1:20),nrow=4,ncol=5,byrow=F)
rbind(A,B)
```
- 按列合并矩阵A，B，要求B在A的右边。
```{r}
A=matrix(c(1:20),nrow=4,ncol=5,byrow=T)
B=matrix(c(1:20),nrow=4,ncol=5,byrow=F)
cbind(A,B)
```

5. 矩阵A由1,2,...,30构成，且维度都为$5\times 6$。

- 求矩阵A每一行的最大值。
```{r}
A = matrix(c(1:30),nrow=5,ncol=6)
A
apply(A,1,max)
```
- 求矩阵A每一列的和。
```{r}
A = matrix(c(1:30),nrow=5,ncol=6)
A
apply(A,2,sum)
```

6. 寻找异常值。在统计学中，“异常值”(outlier)指的是那些和大多数观测值离得很远的观测点。所以，异常值要么是有问题（例如数字写错了），要么不具有代表性(例如马化腾的收入和深圳市普通居民的收入)。下面我们构造一个简单的方法：

   假设矩阵`A`表示5个城市的居民收入，每个城市调查了10个居民。

- 矩阵`A`的第一行为sz的居民收入，分别为100, 5000, 10000, 100000, 3000, 8000, 20000, 4000, 3000, 2000;
- 矩阵`A`的第二行为sh的居民收入，分别为10000, 500, 1000000, 1000, 2000, 3000, 2000, 9000, 30000, 6000;
- 矩阵`A`的第三行为gz的居民收入，分别为300000, 50000, 0, 1000, 2000, 3000, 200000, 5000, 2300, 1800;
- 矩阵`A`的第四行为bj的居民收入，分别为5000, 90000, 1999000, 20000, 8000, 1000, 200, 40, 300, 200;
- 矩阵`A`的第五行为cd的居民收入，分别为100000, 50000, 100, 10040, 3120, 8660, 2023300, 2000, 9000, 20000000;

- 在R中创建矩阵A，矩阵A的行的名称为城市的名称。
```{r}
A=matrix(c(100,10000,300000,5000,100000,5000,500,50000,90000,50000,10000,1000000,0,1999000,100,100000,1000,1000,20000,10400,3000,2000,2000,8000,3120,8000,3000,3000,1000,8660,20000,2000,200000,200,2023300,4000,9000,5000,40,2000,3000,30000,2300,300,9000,2000,6000,1800,200,20000000),nrow=5,ncol=10)
rownames(A)=c('sz','sh','gz','bj','cd')
A
```

- 我们用非常简单的方法识别出每个城市的异常值，也就是每个城市的最高收入和最低收入的居民。要求输出每个城市异常值在每一行的位置。
```{r}
apply(A,1,which.max)
apply(A,1,which.min)
```

7. 生成一个如下的对称矩阵：
$$
\left[\begin{matrix}1&0.5&0.5\\0.5&1&0.5\\0.5&0.5&1\\ \end{matrix} \right]
$$
但是，要求矩阵的维度为$20\times 20$。矩阵创建好之后，显示矩阵的左上角的5行，5列。
```{r}
A=matrix(c(0.5),20,20)
B=diag(0.5,20,20)
C=A+B
C[1:5,1:5]
```

8. 生成一个如下的对称矩阵：
$$
\left[\begin{matrix}1&0.5&0.5^2&0.5^3\\0.5&1&0.5&0.5^2\\
0.5^2&0.5&1&0.5\\
0.5^3&0.5^2&0.5&1\\ \end{matrix} \right]
$$
但是，要求矩阵的维度为$20\times 20$。矩阵创建好之后，显示矩阵的左上角的5行，5列。
```{r}
A=matrix(1,1,1)
for(i in 1:19){
  B=matrix(0.5^i,1,1)
  A=cbind(A,B)
}

C=A

M=diag(1)
diag(M)=c(0)

N=diag(1)
diag(N)=c(0)

for(i in 1:19){
  A1=A[,1:i,drop=FALSE]
  A2=A[,-(21-i):-20,drop=FALSE]
  D=cbind(M,A2)
  M=cbind(M,N)
  C=rbind(C,D)
}

T=t(C)+C
T1=T-diag(20)
T1[1:5,1:5]
```

提示：第7,8题中，**可能**需要用到函数`diag()`，请查阅帮助文档，自学它的使用方法。

